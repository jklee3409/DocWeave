spring:
  profiles:
    include: local

  application:
    name: docweave-api

  autoconfigure:
    exclude:
      - org.springframework.ai.vectorstore.pgvector.autoconfigure.PgVectorStoreAutoConfiguration
      - org.springframework.ai.model.chat.client.autoconfigure.ChatClientAutoConfiguration

  # Servlet
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

  # DB
  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # JPA
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # AI
  ai:
    openai:
      api-key: ${GROQ_API_KEY}
      base-url: https://api.groq.com/openai
      chat:
        options:
          model: llama-3.3-70b-versatile
          temperature: 0.3
      embedding:
        enabled: false

    ollama:
      base-url: {OLLAMA_BASE_URL}
      chat:
        enabled: false
      embedding:
        enabled: true
        options:
          model: bge-m3

    vectorstore:
      pgvector:
        initialize-schema: true
        index-type: hnsw
        dimensions: 1024

server:
  port: 8080

# CORS
docweave:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS}

  optimization:
    enabled: false